{% extends 'main/auth_base.html' %}
{% block title %}Inscription{% endblock %}

{% block content %}
<div class="">
    <div class="container d-flex justify-content-center py-5">
        {% if person %}
        <div class="row col-md-8 col bg-light rounded-3" id="person">
            <div class="card-body">
                <h1 class="card-title text-center mb-5 fst-italic lh-1 text-uppercase">Créer un compte <span class="text-success">particulier</span>
                </h1>
                <form method="POST" action="{% url 'person_register' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="row g-3">
                        <h3 class="border-bottom mt-5">INFORMATIONS PERSONNELLES</h3>
                        <div class="col-md-6">
                            <label for="" class="form-label">Civilité <span class="text-danger"> *</span></label> <br>
                            <div class="form-check form-check-inline py-2">
                                <input type="radio" class="form-check-input" id="Monsieur" name="gender" value="M" checked>
                                <label for="Monsieur" class="form-check-label">Monsieur</label>
                            </div>
                            <div class="form-check form-check-inline py-2">
                                <input type="radio" class="form-check-input" id="Madame" name="gender" value="F">
                                <label for="Madame" class="form-check-label">Madame</label>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <label for="marital_status" class="form-label">Etat civil <span class="text-danger"> *</span></label>
                            <select class="form-control" name="marital_status" id="marital_status">
                                <option value="1" selected>Célibataire</option>
                                <option value="2">Epoux(se)</option>
                                <option value="3">Veuf(ve)</option>
                            </select>
                        </div>

                        <div class="col-md-12" id="de">
                            <label for="partner_name" class="form-label">De (Nom complet du partenaire)</label>
                            <input type="text" class="form-control" id="partner_name" name="partner_name"
                                placeholder="Nom complet du partenaire">
                        </div>

                        <div class="col-md-6">
                            <label for="last_name" class="form-label">Nom <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="last_name" name="last_name" required>
                        </div>

                        <div class="col-md-6">
                            <label for="first_name" class="form-label">Prénom <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="first_name" name="first_name" required>
                        </div>

                        <div class="col-md-6">
                            <label for="birthday" class="form-label">Né le <span class="text-danger"> *</span></label>
                            <input type="date" class="form-control" id="birthday" name="birthday" required max="{% now '2004-m-d' %}">
                        </div>

                        <div class="col-md-6">
                            <label for="bornAt" class="form-label">Né à <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="bornAt" name="bornAt" required>
                        </div>

                        <div class="col-md-6">
                            <label for="profession" class="form-label">Profession <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="profession" name="profession" required>
                        </div>

                        <div class="col-md-6">
                            <label for="nationality" class="form-label">Nationalité</label>
                            <select class="form-control" name="nationality" id="nationality">
                                {% for s in states %}
                                <option value="{{s.0}}" {% if s.0 == 'TG' %} selected {% endif %}>
                                    {{s.1}}
                                </option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-12">
                            <label for="id_document" class="form-label">Votre carte d'identité en PDF <span class="text-danger"> *</span></label>
                            <input type="file" class="form-control" id="id_document" name="id_document"
                            accept="application/pdf" required>
                            <small><i>Ce document sera utilisé dans l'étude de vos demandes.</i></small>
                            {% if file %}
                            <br>
                            <small class="text-danger">{{file}}</small>
                            {% endif %}
                        </div>

                        <h3 class="border-bottom mt-5">INFORMATIONS DE CONTACT</h3>

                        <div class="col-md-6">
                            <label for="address" class="form-label">Habite à <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="address" name="address" required>
                        </div>

                        <div class="col-md-6">
                            <label for="residence" class="form-label">Réside à</label>
                            <input type="text" class="form-control" id="residence" name="residence">
                        </div>

                        <div class="col-md-6">
                            <label for="phone" class="form-label">Numéro de téléphone <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="phone" name="phone" required
                            pattern="[9,7]{1}[0,1,2,3,6,7,8,9]{1}[0-9]{6}">
                        </div>


                        <div class="col-md-6">
                            <label for="email" class="form-label">Email <span class="text-danger"> *</span></label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>

                        <h3 class="border-bottom mt-5">INFORMATIONS DE CONNEXION</h3>

                        <div class="col-md-6">
                            <label for="username" class="form-label">Nom d'utilisateur <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="username" name="username" required>
                            {% if username %}
                            <small class="text-danger">{{username}}</small>
                            {% endif %}
                        </div>

                        <div class="col-md-6">
                            <label for="password" class="form-label">Mot de passe <span class="text-danger"> *</span></label>
                            <input type="password" class="form-control" id="password" name="password" minlength="8"
                                required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Doit contenir au moins un majiscule, un miniscule, un chifre et au moins 8 caractères">
                            {% if password %}
                            <small class="text-danger">{{password}}</small>
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-12 my-4 text-center">
                        <button type="reset" class="btn btn-outline-danger">Annuler</button>
                        <button type="submit" class="btn btn-success text-dark">Créer un compte</button>
                    </div>
                </form>
                <h6 class="text-center my-5">Si vous avez déjà un compte, <a href="{% url 'login' %}">connectez vous</a>.</h6>
            </div>
        </div>
        {% endif %}

        {% if enterprise %}
        <div class="card col-md-8 col bg-light rounded-3" id="enterprise">
            <div class="card-body">
                <h1 class="card-title text-center mb-5 fst-italic lh-1 text-uppercase">CREER UN COMPTE <span class="text-success">ENTREPRISE</span>
                </h1>
                <form method="POST" action="{% url 'enterprise_register' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="first_name" class="form-label">Raison sociale <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="first_name" name="first_name" required>
                        </div>

                        <div class="col-md-6">
                            <label for="email" class="form-label">Email <span class="text-danger"> *</span></label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>

                        <div class="col-md-6">
                            <label for="username" class="form-label">Nom d'utilisateur <span class="text-danger"> *</span></label>
                            <input type="text" class="form-control" id="username" name="username" required>
                            {% if username %}
                            <small class="text-danger">{{username}}</small>
                            {% endif %}
                        </div>

                        <div class="col-md-6">
                            <label for="password" class="form-label">Mot de passe <span class="text-danger"> *</span></label>
                            <input type="password" class="form-control" id="password" name="password" minlength="8"
                                required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Doit contenir au moins un majiscule, un miniscule, un chifre et au moins 8 caractères">
                            {% if password %}
                            <small class="text-danger">{{password}}</small>
                            {% endif %}

                        </div>

                        <div class="col-12">
                            <label for="id_document" class="form-label">Votre carte d'opérateur économique en PDF <span class="text-danger"> *</span></label>
                            <input type="file" class="form-control" id="id_document" name="id_document"
                            accept="application/pdf" required>
                            <small><i>Ce document sera utilisé dans l'étude de vos demandes.</i></small>
                            {% if file %}
                            <br>
                            <small class="text-danger">{{file}}</small>
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-12 my-4 text-center">
                        <button type="reset" class="btn btn-outline-danger">Annuler</button>
                        <button type="submit" class="btn btn-success text-dark">Créer un compte</button>
                    </div>
                </form>
                <h6 class="text-center my-5">Si vous avez déjà un compte, <a href="{% url 'login' %}">connectez vous</a>.</h6>
            </div>
        </div>
        {% endif %}

    </div>
</div>

{% endblock%}